{% extends "base.html" %}
{% block head %}
<script>
    function devregist() {
        $.ajax({
            url: "/api/v1/devices",
            contentType: "application/json",
            method: "POST",
            data: JSON.stringify({
                serialnumber: $("#serialnumber").val(),
                maxcurrent: $("#maxcurrent").val()
            }),
        }).done(function(res) {
            if (res.message) {
                alert("SUCCESS: " + res.message); 
            } else {
                alert("ERROR: " + res.error);
            }
            window.location = "/";   
        });
    }
</script>
{% endblock %}
{% block contents %}
<div class="container">
    <div class="row mt-5">
        <h1>Measuring Device Registration</h1>
    </div>
    <div class="row mt-5">
        <div class="col-12">
            <form>
                <div class="form-group">
                    <label for="serialnumber">Login ID</label>
                    <input type="text" id="serialnumber" class="form-control" placeholder="Serial Number" name="serialnumber">
                </div>
                <div class="form-group">
                    <label for="maxcurrent">User Name</label>
                    <input type="text" id="maxcurrent" class="form-control" placeholder="Max. Current" name="maxcurrent">
                </div>
                <button type="button" class="btn btn-primary mt-3" onclick="devregist()">Submit</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}