<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Home Admin</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://momentjs.com/downloads/moment.min.js"></script>
    <script src="https://momentjs.com/downloads/moment-timezone-with-data.min.js"></script>
</head>
<body>
    <h2>ğŸ•’ í˜„ì¬ íƒ€ì„ì¡´: <span id="current-timezone"></span></h2>

    <label for="timezone-picker">íƒ€ì„ì¡´ ì„ íƒ:</label>
    <input list="timezone-list" id="timezone-picker" placeholder="ì˜ˆ: Asia/Seoul">
    <datalist id="timezone-list"></datalist>

    <p>ğŸ“… í˜„ì¬ ì‹œê°„: <span id="current-time"></span></p>

    <script>
        // ëª¨ë“  íƒ€ì„ì¡´ì„ datalistì— ì¶”ê°€
        const timezones = moment.tz.names();
        console.log(timezones);
        timezones.forEach(function(tz) {
            $('#timezone-list').append(`<option value="${tz}">`);
        });

        // ì´ˆê¸° íƒ€ì„ì¡´ ì„¤ì •
        const initialTimezone = moment.tz.guess();
        $('#current-timezone').text(initialTimezone);
        $('#timezone-picker').val(initialTimezone);
        updateTime(initialTimezone);

        // ì‹œê°„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateTime(timezone) {
            const now = moment().tz(timezone);
            $('#current-time').text(now.format('YYYY-MM-DD HH:mm:ss'));
        }

        // íƒ€ì„ì¡´ ë³€ê²½ ì´ë²¤íŠ¸
        $('#timezone-picker').on('input', function() {
            const selectedTimezone = $(this).val();
            if (moment.tz.zone(selectedTimezone)) {
                $('#current-timezone').text(selectedTimezone);
                updateTime(selectedTimezone);
            }
        });

        // ì‹¤ì‹œê°„ ì‹œê°„ ê°±ì‹ 
        setInterval(function() {
            const tz = $('#timezone-picker').val();
            if (moment.tz.zone(tz)) {
                updateTime(tz);
            }
        }, 1000);
    </script>
</body>
</html>
